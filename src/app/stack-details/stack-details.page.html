<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Stack - {{currentStack.name}}
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Stack - {{currentStack.name}}</ion-title>
    </ion-toolbar>
  </ion-header>
  <ion-checkbox *ngIf="cards.length > 0" [(ngModel)]="toggleEditCheck" (ionChange)="toggleEditCard($event)" class="ion-padding">Edit</ion-checkbox>
  <ion-checkbox *ngIf="cards.length > 0" [(ngModel)]="toggleDeleteCheck" (ionChange)="toggleDeleteCard($event)" class="ion-padding" >Delete</ion-checkbox>

  <ion-button class="ion-float-right" id="open-card-form-modal" (click)="formMode = 'create'"><ion-icon name="add"></ion-icon></ion-button>
  <ion-modal trigger="open-card-form-modal">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-buttons slot="start">
            <ion-button (click)="closeCardFormModal()">Cancel</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <app-card-create-form *ngIf="formMode === 'create'" (submitStack)="saveCreatedCard($event)"></app-card-create-form>
        <app-card-update-form *ngIf="formMode === 'edit'" (submitCard)="saveUpdatedCard($event)" [editCard]="editCard" [stacks]="stacks"></app-card-update-form>
      </ion-content>
    </ng-template>
  </ion-modal>

  <hr style="border-top: solid 1px lightgray;">
  <ion-segment value="unskilled" (ionChange)="toggleLearnedAndUnskilled($event)">
    <ion-segment-button value='unskilled'>
      <ion-label>Unskilled</ion-label>
    </ion-segment-button>
    <ion-segment-button value='learned'>
      <ion-label>Learned</ion-label>
    </ion-segment-button>
  </ion-segment>
  <ion-grid id="stackLearnOptionsBox" *ngIf="cards.length > 0">
    <ion-row>
      <h3>Options</h3>
    </ion-row>
    <ion-row>
      <ion-col>
        <strong>Order Cards:</strong>
        <ion-radio-group (ionChange)="toggleStackLearnOptionsStack($event)" value="ordered" class="ion-padding">
          <ion-label>Ordered</ion-label><ion-radio value="ordered" aria-label="front"></ion-radio>
          <ion-label>Mixed</ion-label><ion-radio value="mixed" aria-label="mixed"></ion-radio>
        </ion-radio-group>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <strong>Show first: </strong>
        <ion-radio-group (ionChange)="toggleStackLearnOptionsCards($event)" value="front" class="ion-padding">
          <ion-label>Front</ion-label><ion-radio value="front" aria-label="front"></ion-radio>
          <ion-label>Back</ion-label><ion-radio value="back" aria-label="back"></ion-radio>
          <ion-label>Mixed</ion-label><ion-radio value="mixed" aria-label="mixed"></ion-radio>
        </ion-radio-group>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-button expand="block" *ngIf="cards.length > 0" class="ion-float-right" (click)="navigateToStackLearn()"><ion-icon name="caret-forward-outline"></ion-icon></ion-button>
    </ion-row>




  <ion-list>
      <ion-grid *ngIf="cards.length > 0">
      <ion-row *ngFor="let card of cards; let i = index">
        <ion-col size="12" *ngIf="!toggleDeleteCheck && !toggleEditCheck">
          <div class='card-container'>

            <div #frontCard class="ion-padding ion-text-center card-front">
              <ion-label class="ion-text-center">{{card.front}}</ion-label>
            </div>

          </div>
        </ion-col>
        <ion-col size="11" *ngIf="toggleDeleteCheck || toggleEditCheck">
          <div class='card-container'>

            <div #frontCard class="ion-padding ion-text-center card-front">
              <ion-label class="ion-text-center">{{card.front}}</ion-label>
            </div>

          </div>
        </ion-col>
        <ion-col size="1">
          <ion-button color="danger" *ngIf="toggleDeleteCheck" [id]="'present-alert-'+card.id" class="ion-float-right ion-padding stackDeleteButton">Delete</ion-button>
          <ion-alert *ngIf="toggleDeleteCheck" [trigger]="'present-alert-'+card.id" [header]="'Delete Card?'" [buttons]="deleteAlertButtons" (didDismiss)="setDeleteResult($event, card)"></ion-alert>
          <ion-button *ngIf="toggleEditCheck" (click)="openEditCardModal(card)" color="primary" class="ion-float-right ion-padding">Edit</ion-button>
        </ion-col>
      </ion-row>
      </ion-grid>
    </ion-list>
  </ion-grid>
  </ion-content>
