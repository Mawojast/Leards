"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4068],{4068:(G,f,l)=>{l.r(f),l.d(f,{StackDetailsPageModule:()=>Y});var g=l(6814),c=l(6223),m=l(3911),r=l(5548),_=l(2125),d=l(5861),t=l(2029),h=l(2014),C=l(6310);let k=(()=>{class a{constructor(){this.submitStack=new t.vpe,this.form=new c.cw({front:new c.NI("",{nonNullable:!0,validators:[c.kI.required]}),back:new c.NI("",{nonNullable:!0,validators:[c.kI.required]})})}submitForm(){try{let n={...this.form.getRawValue(),id:0,stack_id:0,stack_name:"",learned:0};this.submitStack.emit(n)}catch(e){alert(e)}}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-card-create-form"]],outputs:{submitStack:"submitStack"},decls:9,vars:2,consts:[[3,"formGroup","ngSubmit"],["for","front"],["id","front","formControlName","front"],["for","back"],["id","back","formControlName","back"],["type","submit",3,"disabled"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.submitForm()}),t.TgZ(1,"ion-label",1),t._uU(2,"Front"),t.qZA(),t._UZ(3,"ion-input",2),t.TgZ(4,"ion-label",3),t._uU(5,"Back"),t.qZA(),t._UZ(6,"ion-input",4),t.TgZ(7,"ion-button",5),t._uU(8,"Save"),t.qZA()()),2&e&&(t.Q6J("formGroup",n.form),t.xp6(7),t.Q6J("disabled",n.form.invalid))},dependencies:[c._Y,c.JJ,c.JL,c.sg,c.u,r.YG,r.pK,r.Q$,r.j9]}),a})(),b=(()=>{class a{constructor(){this.submitCard=new t.vpe,this.form=new c.cw({front:new c.NI("",{nonNullable:!0,validators:[c.kI.required]}),back:new c.NI("",{nonNullable:!0,validators:[c.kI.required]}),learned:new c.NI("",{nonNullable:!0,validators:[c.kI.required]})})}submitForm(){if(this.editCard&&this.stacks){const e=this.form.getRawValue();this.editCard={stack_id:this.editCard.stack_id,stack_name:this.editCard.stack_name,id:this.editCard.id,learned:parseInt(e.learned),front:e.front,back:e.back},this.submitCard.emit(this.editCard)}}ngOnInit(){this.editCard&&this.stacks&&this.form.setValue({front:this.editCard.front,back:this.editCard.back,learned:this.editCard.learned.toString()})}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-card-update-form"]],inputs:{editCard:"editCard",stacks:"stacks"},outputs:{submitCard:"submitCard"},decls:16,vars:2,consts:[[3,"formGroup","ngSubmit"],["for","front"],["id","front","formControlName","front"],["for","back"],["id","back","formControlName","back"],["formControlName","learned"],["value","0","aria-label","Custom checkbox that is checked"],["value","1","aria-label","Custom checkbox"],["type","submit",3,"disabled"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.submitForm()}),t.TgZ(1,"ion-label",1),t._uU(2,"Name"),t.qZA(),t._UZ(3,"ion-input",2),t.TgZ(4,"ion-label",3),t._uU(5,"Back"),t.qZA(),t._UZ(6,"ion-input",4),t.TgZ(7,"ion-radio-group",5)(8,"ion-label"),t._uU(9,"Unskilled"),t.qZA(),t._UZ(10,"ion-radio",6),t.TgZ(11,"ion-label"),t._uU(12,"Learned"),t.qZA(),t._UZ(13,"ion-radio",7),t.qZA(),t.TgZ(14,"ion-button",8),t._uU(15,"Save"),t.qZA()()),2&e&&(t.Q6J("formGroup",n.form),t.xp6(14),t.Q6J("disabled",n.form.invalid))},dependencies:[c._Y,c.JJ,c.JL,c.sg,c.u,r.YG,r.pK,r.Q$,r.B7,r.se,r.U5,r.QI,r.j9]}),a})();const x=["frontCard"],S=["backCard"],p=function(a){return{height:a}};function Z(a,i){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",1),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.flipCard())}),t.TgZ(2,"div",2,3)(4,"ion-label",4),t._uU(5),t.qZA()(),t.TgZ(6,"div",5,6)(8,"ion-label",4),t._uU(9),t.qZA()()(),t.BQk()}if(2&a){const e=t.oxw();t.xp6(1),t.ekj("flipped",e.isFlipped),t.Q6J("ngStyle",t.VKq(5,p,e.cardHeight+"px")),t.xp6(4),t.hij("",e.card.front,"++++++++++++++"),t.xp6(4),t.Oqu(e.card.back)}}function D(a,i){if(1&a&&(t.ynx(0),t.TgZ(1,"div",7)(2,"div",2,3)(4,"ion-label",4),t._uU(5),t.qZA()()(),t.BQk()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngStyle",t.VKq(2,p,e.cardHeight+"px")),t.xp6(4),t.hij("",e.card.front,"-------------------")}}let w=(()=>{class a{constructor(){this.isFlipped=!1,this.cardHeight=0}flipCard(){this.isFlipped=!this.isFlipped}ngAfterViewInit(){console.log("afterViewInit - cardComponent");const e=this.frontCardRef.nativeElement,n=this.backCardRef.nativeElement;e&&n&&(this.cardHeight=Math.max(e.offsetHeight,n.offsetHeight),alert(this.cardHeight))}ionViewDidEnter(){console.log("ionViewDidEnter - CardComponent"),alert("ionViewDidEnter")}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-card"]],viewQuery:function(e,n){if(1&e&&(t.Gf(x,5),t.Gf(S,5)),2&e){let o;t.iGM(o=t.CRH())&&(n.frontCardRef=o.first),t.iGM(o=t.CRH())&&(n.backCardRef=o.first)}},inputs:{card:"card",toggleDeleteCheck:"toggleDeleteCheck",toggleEditCheck:"toggleEditCheck"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"card-container",3,"ngStyle","click"],[1,"ion-padding","ion-text-center","card-front"],["frontCard",""],[1,"ion-text-center"],[1,"ion-padding","ion-text-center","card-back"],["backCard",""],[1,"card-container",3,"ngStyle"]],template:function(e,n){1&e&&(t.YNc(0,Z,10,7,"ng-container",0),t.YNc(1,D,6,4,"ng-container",0)),2&e&&(t.Q6J("ngIf",!n.toggleDeleteCheck&&!n.toggleEditCheck),t.xp6(1),t.Q6J("ngIf",n.toggleDeleteCheck||n.toggleEditCheck))},dependencies:[g.O5,g.PC,r.Q$],styles:[".card-container[_ngcontent-%COMP%]{transition:transform .5s;transform-style:preserve-3d;height:3rem}.card-container.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.card-front[_ngcontent-%COMP%], .card-back[_ngcontent-%COMP%]{position:absolute;width:100%;-webkit-backface-visibility:hidden;backface-visibility:hidden}.card-back[_ngcontent-%COMP%]{transform:rotateY(180deg)}"]}),a})();function T(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"ion-checkbox",10),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.toggleEditCheck=o)})("ionChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.toggleEditCard(o))}),t._uU(1,"Edit"),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("ngModel",e.toggleEditCheck)}}function v(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"ion-checkbox",10),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.toggleDeleteCheck=o)})("ionChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.toggleDeleteCard(o))}),t._uU(1,"Delete"),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("ngModel",e.toggleDeleteCheck)}}function M(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"app-card-create-form",16),t.NdJ("submitStack",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.saveCard(o))}),t.qZA()}}function J(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"app-card-update-form",17),t.NdJ("submitCard",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.updateCard(o))}),t.qZA()}if(2&a){const e=t.oxw(2);t.Q6J("editCard",e.editCard)("stacks",e.stacks)}}function y(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",11)(3,"ion-button",12),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.closeCardFormModal())}),t._uU(4,"Cancel"),t.qZA()()()(),t.TgZ(5,"ion-content",13),t.YNc(6,M,1,0,"app-card-create-form",14),t.YNc(7,J,1,2,"app-card-update-form",15),t.qZA()}if(2&a){const e=t.oxw();t.xp6(6),t.Q6J("ngIf","create"===e.formMode),t.xp6(1),t.Q6J("ngIf","edit"===e.formMode)}}function F(a,i){if(1&a&&(t.TgZ(0,"ion-col",25),t._UZ(1,"app-card",26),t.qZA()),2&a){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("card",e)("toggleDeleteCheck",n.toggleDeleteCheck)("toggleEditCheck",n.toggleEditCheck)}}function N(a,i){if(1&a&&(t.TgZ(0,"ion-col",27),t._UZ(1,"app-card",26),t.qZA()),2&a){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("card",e)("toggleDeleteCheck",n.toggleDeleteCheck)("toggleEditCheck",n.toggleEditCheck)}}function P(a,i){if(1&a&&(t.TgZ(0,"ion-button",28),t._uU(1,"Delete"),t.qZA()),2&a){const e=t.oxw().$implicit;t.Q6J("id","present-alert-"+e.id)}}function I(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"ion-alert",29),t.NdJ("didDismiss",function(o){t.CHM(e);const s=t.oxw().$implicit,u=t.oxw(2);return t.KtG(u.setDeleteResult(o,s))}),t.qZA()}if(2&a){const e=t.oxw().$implicit,n=t.oxw(2);t.Q6J("trigger","present-alert-"+e.id)("header","Delete Card?")("buttons",n.deleteAlertButtons)}}function A(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"ion-button",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.openEditCardModal(o))}),t._uU(1,"Edit"),t.qZA()}}function E(a,i){if(1&a&&(t.TgZ(0,"ion-row"),t.YNc(1,F,2,3,"ion-col",19),t.YNc(2,N,2,3,"ion-col",20),t.TgZ(3,"ion-col",21),t.YNc(4,P,2,1,"ion-button",22),t.YNc(5,I,1,3,"ion-alert",23),t.YNc(6,A,2,0,"ion-button",24),t.qZA()()),2&a){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.toggleDeleteCheck&&!e.toggleEditCheck),t.xp6(1),t.Q6J("ngIf",e.toggleDeleteCheck||e.toggleEditCheck),t.xp6(2),t.Q6J("ngIf",e.toggleDeleteCheck),t.xp6(1),t.Q6J("ngIf",e.toggleDeleteCheck),t.xp6(1),t.Q6J("ngIf",e.toggleEditCheck)}}function Q(a,i){if(1&a&&(t.TgZ(0,"ion-grid"),t.YNc(1,E,7,5,"ion-row",18),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.cards)}}const U=[{path:"",component:(()=>{class a{constructor(e,n,o,s){this.activeRoute=e,this.leardsStorage=n,this.router=o,this.translateConfigService=s,this.stacks=[],this.cards=[],this.currentStack={id:0,name:"",background_color:"",font_color:""},this.toggleEditCheck=!1,this.toggleDeleteCheck=!1,this.formMode="create",this.handlerMessage="",this.roleMessage="",this.deleteAlertButtons=[{text:"Cancel",role:"cancel",handler:()=>{this.handlerMessage="Delete canceled"}},{text:"OK",role:"confirm",handler:()=>{this.handlerMessage="Delete confirmed"}}],this.translateConfigService.getDefaultLanguage(),this.language=this.translateConfigService.getCurrentLang(),console.log(this.language)}toggleEditCard(e){!0===e.detail.checked&&(this.toggleDeleteCheck=!1),this.toggleEditCheck=e.detail.checked}toggleDeleteCard(e){!0===e.detail.checked&&(this.toggleEditCheck=!1),this.toggleDeleteCheck=e.detail.checked}closeCardFormModal(){this.formMode="create",this.modal.dismiss(null,"cancel")}openEditCardModal(e){this.formMode="edit",this.editCard=e,this.modal.present()}setDeleteResult(e,n){var o=this;return(0,d.Z)(function*(){"confirm"===e.detail.role&&(yield o.deleteCardFromStorage(n.id),yield o.loadCardsFromStorage(o.currentStack.id))})()}getHighestCardId(){return 0===this.cards.length?0:this.cards.reduce((e,n)=>n.id>e.id?n:e).id}saveCard(e){var n=this;return(0,d.Z)(function*(){e.id=n.getHighestCardId()+1,e.stack_id=n.currentStack.id,e.stack_name=n.currentStack.name,n.cards.push(e),yield n.saveCardsToStorage(),yield n.loadCardsFromStorage(n.currentStack.id),n.closeCardFormModal()})()}updateCard(e){var n=this;return(0,d.Z)(function*(){n.cards.map(o=>{o.id===e.id&&(o.front=e.front,o.back=e.back,o.learned=e.learned)}),alert(JSON.stringify(n.cards)),yield n.saveCardsToStorage(),yield n.loadCardsFromStorage(n.currentStack.id),alert(JSON.stringify(n.cards)),n.closeCardFormModal()})()}saveCardsToStorage(){var e=this;return(0,d.Z)(function*(){yield e.leardsStorage.set("cards",JSON.stringify(e.cards))})()}deleteCardFromStorage(e){var n=this;return(0,d.Z)(function*(){const o=n.cards.filter(s=>s.id!==e);yield n.leardsStorage.set("cards",JSON.stringify(o))})()}loadStacksFromStorage(e){var n=this;return(0,d.Z)(function*(){const o=yield n.leardsStorage.get("stacks");o&&(n.stacks=yield JSON.parse(o),n.currentStack=n.stacks.find(s=>s.id===e))})()}loadCardsFromStorage(e){var n=this;return(0,d.Z)(function*(){const o=yield n.leardsStorage.get("cards");if(o){const s=JSON.parse(o);n.cards=s.filter(u=>u.stack_id===e)}else n.cards=[]})()}ngOnInit(){try{let e=parseInt(this.activeRoute.snapshot.paramMap.get("id"));this.loadStacksFromStorage(e),this.loadCardsFromStorage(e)}catch{this.router.navigateByUrl("home")}}ngAfterViewInit(){console.log("AfterViewInit - StackDetails")}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(_.gz),t.Y36(h.K),t.Y36(_.F0),t.Y36(C.w))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-stack-details"]],viewQuery:function(e,n){if(1&e&&t.Gf(r.ki,5),2&e){let o;t.iGM(o=t.CRH())&&(n.modal=o.first)}},decls:19,vars:13,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],["class","ion-padding",3,"ngModel","ngModelChange","ionChange",4,"ngIf"],["id","open-card-form-modal",1,"ion-float-right",3,"click"],["name","add"],["trigger","open-card-form-modal"],[2,"border-top","solid 1px lightgray"],[4,"ngIf"],[1,"ion-padding",3,"ngModel","ngModelChange","ionChange"],["slot","start"],[3,"click"],[1,"ion-padding"],[3,"submitStack",4,"ngIf"],[3,"editCard","stacks","submitCard",4,"ngIf"],[3,"submitStack"],[3,"editCard","stacks","submitCard"],[4,"ngFor","ngForOf"],["size","12",4,"ngIf"],["size","11",4,"ngIf"],["size","1"],["color","danger","class","ion-float-right ion-padding stackDeleteButton",3,"id",4,"ngIf"],[3,"trigger","header","buttons","didDismiss",4,"ngIf"],["color","primary","class","ion-float-right ion-padding",3,"click",4,"ngIf"],["size","12"],[3,"card","toggleDeleteCheck","toggleEditCheck"],["size","11"],["color","danger",1,"ion-float-right","ion-padding","stackDeleteButton",3,"id"],[3,"trigger","header","buttons","didDismiss"],["color","primary",1,"ion-float-right","ion-padding",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t._uU(3),t.ALo(4,"translate"),t.qZA()()(),t.TgZ(5,"ion-content",1)(6,"ion-header",2)(7,"ion-toolbar")(8,"ion-title",3),t._uU(9),t.ALo(10,"translate"),t.qZA()()(),t.YNc(11,T,2,1,"ion-checkbox",4),t.YNc(12,v,2,1,"ion-checkbox",4),t.TgZ(13,"ion-button",5),t.NdJ("click",function(){return n.formMode="create"}),t._UZ(14,"ion-icon",6),t.qZA(),t.TgZ(15,"ion-modal",7),t.YNc(16,y,8,2,"ng-template"),t.qZA(),t.TgZ(17,"ion-list",8),t.YNc(18,Q,2,1,"ion-grid",9),t.qZA()()),2&e&&(t.Q6J("translucent",!0),t.xp6(3),t.AsE(" ",t.lcZ(4,9,"page_home_title")," - ",n.currentStack.name," "),t.xp6(2),t.Q6J("fullscreen",!0),t.xp6(4),t.AsE("",t.lcZ(10,11,"page_home_title")," - ",n.currentStack.name,""),t.xp6(2),t.Q6J("ngIf",n.cards.length>0),t.xp6(1),t.Q6J("ngIf",n.cards.length>0),t.xp6(6),t.Q6J("ngIf",n.cards.length>0))},dependencies:[g.sg,g.O5,c.JJ,c.On,r.Ge,r.YG,r.Sm,r.nz,r.wI,r.W2,r.jY,r.Gu,r.gu,r.q_,r.Nd,r.wd,r.sr,r.ki,r.w,k,b,w,m.X$],styles:[".card-container[_ngcontent-%COMP%]{transition:transform .5s;transform-style:preserve-3d;height:3rem}.card-container.flipped[_ngcontent-%COMP%]{transform:rotateY(180deg)}.card-front[_ngcontent-%COMP%], .card-back[_ngcontent-%COMP%]{position:absolute;width:100%;-webkit-backface-visibility:hidden;backface-visibility:hidden}.card-back[_ngcontent-%COMP%]{transform:rotateY(180deg)}"]}),a})()}];let q=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[_.Bz.forChild(U),_.Bz]}),a})(),Y=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[g.ez,c.u5,m.aw,c.UX,r.Pc,q]}),a})()}}]);